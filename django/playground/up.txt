âœ³ï¸ ğŸ‘‰ ğŸ’¥

ğŸ’¥ Fundamentals ğŸ’¥
âœ³ï¸ activate virtual environmetn for the project ğŸ‘‰ pipenv shell
âœ³ï¸ start django project ğŸ‘‰ django-admin startproject <name> .
âœ³ï¸ find the path to project's venv ğŸ‘‰ pipenv --venv, take this and then ctrl+shift+p -> python interpreter -> /bin/python to use this interpreter
âœ³ï¸ create app ğŸ‘‰ python manage.py startapp <name>
âœ³ï¸ in an app ğŸ‘‰ apps.py is config and view.py is request handler
âœ³ï¸ an app should go into the installed apps list
âœ³ï¸ pipenv install django-debug-toolbar

ğŸ’¥ Data model ğŸ’¥
âœ³ï¸ good model design ğŸ‘‰ minimal coupling - high cohesion (focus)
âœ³ï¸ model classes inherit from models.Model
âœ³ï¸ field types are in models.[fieldType] like models.CharField
âœ³ï¸ django automatically creates an id field as PK for the model
âœ³ï¸ set primary_key=True for field type parameter to change the PK for the model
âœ³ï¸ create one to one relationship: set models.OneToOneField in the child model and pass the parent model as first parameter and set primary_key to True
âœ³ï¸ create one to many relationship: set models.ForeignKey in the child model and pass the parent model as first parameter
âœ³ï¸ creat many to many relationship: set models.ManyToManyField in one model and pass the other model as the first parameter, django will create reverse relationship in other model with [otherModel_set] like product_set, to overwrite this name use related_name parameter
âœ³ï¸ circular dependency: just pass the model name as a string and set related_name='+', this tells django not to make the reverse relationship
âœ³ï¸ generic relationship: content_type models.ForeignKey(ContentType), object_id = models.PositiveSmallIntegerField(), content_object = GenericForeignKey()

ğŸ’¥ configure django with postgres ğŸ’¥
âœ³ï¸ sudo apt update
âœ³ï¸ sudo apt install python3-pip python3-dev libpq-dev postgresql postgresql-contrib
âœ³ï¸ During the Postgres installation, an operating system user named postgres was created to correspond to the postgres PostgreSQL administrative user. You need to use this user to perform administrative tasks. You can use sudo and pass in the username with the -u option.
âœ³ï¸ Log into an interactive Postgres session by typing: sudo -u postgres psql
âœ³ï¸ First, you will create a database for the Django project. Each project should have its own isolated database for security reasons. We will call the database myproject in this guide, but itâ€™s always better to select something more descriptive: CREATE DATABASE myproject;
âœ³ï¸ Next, you will create a database user which you will use to connect to and interact with the database. Set the password to something strong and secure: CREATE USER myprojectuser WITH PASSWORD 'password';
âœ³ï¸ You are setting the default encoding to UTF-8, which Django expects. You are also setting the default transaction isolation scheme to â€œread committedâ€, which blocks reads from uncommitted transactions. Lastly, you are setting the timezone. By default, your Django projects will be set to use UTC. These are all recommendations from the Django project itself.
âœ³ï¸ ALTER ROLE myprojectuser SET client_encoding TO 'utf8';
ALTER ROLE myprojectuser SET default_transaction_isolation TO 'read committed';
ALTER ROLE myprojectuser SET timezone TO 'UTC';
âœ³ï¸ Now, all you need to do is give your database user access rights to the database you created: GRANT ALL PRIVILEGES ON DATABASE myproject TO myprojectuser;
âœ³ï¸ Exit the SQL prompt to get back to the postgres userâ€™s shell session: \q
âœ³ï¸ in settings.py:
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql',
        'NAME': 'myproject',
        'USER': 'myprojectuser',
        'PASSWORD': 'password',
        'HOST': 'localhost',
        'PORT': '',
    }
}
âœ³ï¸ While you are here, you will also need to adjust the ALLOWED_HOSTS directive. This defines a whitelist of addresses or domain names allowed to connect to the Django instance. Any incoming requests with a Host header that is not in this list will raise an exception. Django requires that you set this to prevent a certain class of security vulnerability.
# The simplest case: just add the domain name(s) and IP addresses of your Django server
# ALLOWED_HOSTS = [ 'example.com', '203.0.113.5']
# To respond to 'example.com' and any subdomains, start the domain with a dot
# ALLOWED_HOSTS = ['.example.com', '203.0.113.5']
ALLOWED_HOSTS = ['your_server_domain_or_IP']

ğŸ’¥ Setting up the database ğŸ’¥
âœ³ï¸ 